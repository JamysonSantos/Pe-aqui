<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.6.1/dist/vuetify.min.css" rel="stylesheet">
    <!-- Estilos adicionais -->
    <style>
        /* Estilos do modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.4);
            padding-top: 60px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
        .close {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
        /* Restante dos estilos permanecem iguais */
    </style>
</head>
<body>
    <div id="app">
        <v-app>
            <v-container>
                <v-form @submit.prevent="submitForm">
                    <v-row>
                        <v-col cols="12" sm="6">
                            <v-text-field v-model="itemName" label="Nome do Item" required></v-text-field>
                        </v-col>
                        <v-col cols="12" sm="4">
                            <v-text-field v-model="price" label="Preço" type="number" required></v-text-field>
                        </v-col>
                        <v-col cols="12" sm="2">
                            <span v-if="images.length < 3" class="text-caption text-primary">Você pode escolher até 3 fotos do seu produto</span>
                            <v-btn @click="attachImage" color="primary" v-if="images.length < 3" class="button">Anexar foto</v-btn>
                            <input ref="fileInput" type="file" @change="onFileChange" style="display: none;" accept="image/*" multiple v-if="images.length < 3">
                            <div v-if="images.length > 0">
                                <div v-for="(image, index) in images" :key="index" class="image-preview">
                                    <img :src="image.url" alt="Imagem" class="item-image">
                                </div>
                            </div>
                        </v-col>
                    </v-row>
                    <v-row>
                        <v-col>
                            <v-btn @click="submitForm" class="button">Adicionar Item</v-btn>
                            <v-btn @click="visualizarCardapio" class="button">Visualizar cardápio</v-btn>
                            <v-btn @click="finalizarCadastro" class="button">Finalizar cadastro</v-btn>
                        </v-col>
                    </v-row>
                </v-form>
                
                <!-- Modal para exibir os itens salvos -->
                <div id="itemModal" class="modal" v-show="showModal">
                    <div class="modal-content">
                        <span class="close" @click="closeModal">&times;</span>
                        <h2 class="text-primary">Itens Salvos</h2>
                        <v-list dense>
                            <v-list-item v-for="(item, index) in menuItems" :key="index">
                                <!-- Detalhes do item -->
                                <v-list-item-content>
                                    <v-list-item-title>{{ item.name }}</v-list-item-title>
                                    <v-list-item-subtitle>R$ {{ item.price }}</v-list-item-subtitle>
                                    <div v-if="item.images.length > 0">
                                        <div v-for="(image, idx) in item.images" :key="idx" class="image-preview">
                                            <img :src="image.url" alt="Imagem" class="item-image">
                                        </div>
                                    </div>
                                </v-list-item-content>
                            </v-list-item>
                        </v-list>
                    </div>
                </div>
            </v-container>
        </v-app>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.6.1/dist/vuetify.js"></script>
    <script>
        new Vue({
            el: '#app',
            vuetify: new Vuetify(),
            data: {
                itemName: '',
                price: '',
                images: [],
                currentItem: null,
                menuItems: [],
                showModal: false // Adiciona essa variável para controlar a exibição do modal
            },
            methods: {
                submitForm() {
                    if (this.itemName && this.price && this.images.length > 0 && this.images.length <= 3) {
                        const newItem = { 
                            name: this.itemName, 
                            price: parseFloat(this.price).toFixed(2),
                            images: this.images ? this.images.map(img => ({ url: img.url })) : [] // Manter apenas a referência da URL
                        };
                        this.menuItems.push(newItem);
                        this.clearFields();
                    } else {
                        alert('Por favor, preencha todos os campos e selecione até 3 imagens.');
                    }
                },
                clearFields() {
                    this.itemName = '';
                    this.price = '';
                    this.images = [];
                },
                attachImage() {
                    this.$refs.fileInput.click();
                },
                onFileChange(e) {
                    const files = e.target.files;
                    if (this.images.length + files.length > 3) {
                        alert('Você só pode escolher até 3 fotos.');
                        return;
                    }
                    for (let i = 0; i < files.length; i++) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            this.images.push({ url: e.target.result });
                        };
                        reader.readAsDataURL(files[i]);
                    }
                },
                visualizarCardapio() {
                    this.showModal = true; // Abre o modal ao clicar em 'Visualizar cardápio'
                },
                closeModal() {
                    this.showModal = false; // Fecha o modal
                },
                finalizarCadastro() {
                    // Lógica para finalizar o cadastro
                    console.log('Finalizar cadastro');
                }
            }
        });
    </script>
</body>
</html>



